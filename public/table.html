<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        .logo {
      
      font-family: "Playfair Display", serif;
      font-optical-sizing: auto;
      font-weight: 1000;
      font-style: normal;
      font-size:39px;
    }
    
    
        .nav-link-custom {
          transition: background-color 0.3s, color 0.3s;
          /* Smooth transition */
        }
    
        .nav-link-custom:hover {
          background-color: white;
          color: black;
          /* Change text color if needed */
        }
        table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}
#bg{
   width:30px;
}
#bg1{
    width:10px;
}
#con{
    width:30px;
}
#nam{
    width:150px;
}
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-danger">
        <div class="container-fluid">
          <a class="navbar-brand logo " href="#">BloodBond</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav ms-auto">
             
            </ul>
          </div>
        </div>
      </nav>
      <table class="table table-borderless">
       <table id="donorTable">
  <thead>
    <tr>
      <th id="bg1">Sr no.</th>
      <th id="nam">Name</th>
      <th id="bg">Phone No.</th>
      <th id="bg">Age</th>
       <th id="con">BG</th>
      <th id="nam">Pincode</th>
      <th id="con">city</th>
      <th id="con">State</th>
      <th id="con">Adress</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
      </table>
<script>
  document.addEventListener("DOMContentLoaded", async () => {
    const tableBody = document.querySelector("#donorTable tbody");
    const filter = JSON.parse(localStorage.getItem("filter"));

    if (!filter) {
      tableBody.innerHTML = `<tr><td colspan="8">No filter found</td></tr>`;
      return;
    }

    try {
      const response = await fetch("/finddonor", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(filter)
      });

      if (!response.ok) {
        throw new Error("Network response was not ok");
      }

      const donors = await response.json();

      if (donors.length === 0) {
        tableBody.innerHTML = `<tr><td colspan="8">No donors matched your request</td></tr>`;
        return;
      }

      donors.forEach((donor, i) => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${i + 1}</td>
          <td>${donor.Name || "N/A"}</td>
          <td>${donor.Phone || "N/A"}</td>
          <td>${donor.Age || "N/A"}</td>
           <td>${donor.BG || "N/A"}</td>
          <td>${donor.Pincode || "N/A"}</td>
          <td>${donor.City || "N/A"}</td>
          <td>${donor.State || "N/A"}</td>
          <td>${donor.Address || "N/A"}</td>
        `;
        tableBody.appendChild(row);
      });
    } catch (error) {
      console.error("Error loading donor data:", error);
      tableBody.innerHTML = `<tr><td colspan="8">Error loading donor data</td></tr>`;
    }
  });
</script>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" 
integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" 
crossorigin="anonymous">
</script>
</body>
</html>